"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["5734"],{51169:function(e,a,t){t.d(a,{d:()=>r});var l=t(58786),s=t(49247);let i=Symbol("MODAL_INJECT"),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:a={},component:t,onCancel:r,onConfirm:u}=e,n=(0,l.qj)({});return t?[(0,l.aZ)({setup(s,r){let{attrs:u,slots:M}=r;return(0,l.JJ)(i,{state:a,options:e,extendApi:e=>{Object.setPrototypeOf(n,e)},setState:e=>{Object.assign(a,e)}}),()=>(0,l.h)(t,{...s,...u},M)}}),n]:[(0,l.aZ)({setup(a,t){let{attrs:M,slots:d}=t,o=(0,l.f3)(i),m=(0,l.iH)(!1);return n.open=()=>{var a;m.value=!0,null==(a=e.onChangeState)||a.call(e,m.value)},n.close=()=>{m.value=!1},n.setState=a=>{var t;null==o||o.setState(a),null==(t=e.onChangeState)||t.call(e,m.value)},n.getState=()=>(null==o?void 0:o.state)??{},null==o||o.extendApi(n),()=>(0,l.Wm)(s.Z,(0,l.dG)({show:m.value},a,M,{onCancel:r,onConfirm:u,"onUpdate:show":e=>{m.value=e??!1}}),d)}}),n]}},16893:function(e,a,t){t.d(a,{Z:()=>r});var l=t(15496),s=t(58786);let i={class:"mr-4px"},r=(0,s.aZ)({__name:"index",props:{href:{type:String,default:""},text:{type:String,default:""}},setup(e){let a=()=>{window.open(e.href)};return(t,r)=>{let u=l.ZP;return(0,s.wg)(),(0,s.j4)(u,{text:"",onClick:a},{default:(0,s.w5)(()=>[(0,s._)("span",i,(0,s.zw)(e.text||t.$t("common.actions.help")),1),r[0]||(r[0]=(0,s._)("i",{class:"i-custom:help text-primary"},null,-1))]),_:1,__:[0]})}}})},66760:function(e,a,t){t.d(a,{Z:()=>u});var l=t(81021),s=t(15496),i=t(58786);let r={class:"leading-22px text-13px text-desc text-center"},u=(0,i.aZ)({__name:"index",setup(e){let a=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},t=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,u)=>{let n=s.ZP,M=(0,i.up)("i18n-t"),d=l.Z;return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)(()=>[(0,i._)("div",r,[(0,i.Wm)(M,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,i.w5)(()=>[(0,i.Wm)(n,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,i.w5)(()=>u[0]||(u[0]=[(0,i._)("span",null,"Issues",-1),(0,i._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[0]})]),star:(0,i.w5)(()=>[(0,i.Wm)(n,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,i.w5)(()=>u[1]||(u[1]=[(0,i.Uk)(" Star "),(0,i._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[1]})]),_:1}),u[2]||(u[2]=(0,i._)("br",null,null,-1)),(0,i._)("span",null,(0,i.zw)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},46244:function(e,a,t){t.d(a,{Z:()=>i});var l=t(98048),s=t(58786);let i=(0,s.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,a){let{expose:t}=a,i=(0,s.iH)(null);return t({validate:()=>{var e;return null==(e=i.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=i.value)?void 0:e.restoreValidation()}}),(e,a)=>{let t=l.Z;return(0,s.wg)(),(0,s.j4)(t,(0,s.dG)(e.$attrs,{ref_key:"formRef",ref:i,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},61514:function(e,a,t){t.r(a),t.d(a,{default:()=>eg});var l=t(66760),s=t(16893),i=t(52742),r=t(15496),u=t(58786),n=t(68271),M=t(51169),d=t(34541);let{t:o}=t(76882).Z.global,m=()=>d.e.get("/relay/list"),c=e=>d.e.post("/relay/add",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.adding")}}),g=e=>d.e.post("/relay/edit",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.editing")}}),N=e=>d.e.post("/relay/test_connection",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.testing")}}),p=e=>d.e.post("/relay/delete",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.deleting")}}),I=()=>d.e.get("/relay/get_unbound_domains");var y=t(35409),D=t(29875),j=t(53903);let w={class:"status-text"},_=(0,u.aZ)({__name:"SmtpStatus",props:{value:{type:Boolean,default:!1}},setup:e=>(a,t)=>{let l=j.ZP;return(0,u.wg)(),(0,u.j4)(l,{size:"small",bordered:!1},{default:(0,u.w5)(()=>[(0,u._)("div",{class:(0,u.C_)(["status-icon",e.value?"status-success":"status-error"])},null,2),(0,u._)("div",w,(0,u.zw)(e.value?a.$t("smtp.status.online"):a.$t("smtp.status.offline")),1)]),_:1})}});var T=t(41748);let v=(0,T.default)(_,[["__scopeId","data-v-32ed8e22"]]),x={class:"smtp-card relative rounded-8px p-16px shadow-sm"},L={class:"flex items-center mb-16px"},A={class:"flex items-center flex-1"},z={class:"w-32px h-32px flex items-center justify-center rounded-full bg-primary-100"},h=["src"],S={class:"ml-16px flex items-center gap-10px flex-1 min-w-0"},C={class:"text-18px font-600 truncate"},E={class:"ml-8px"},f={class:"smtp-desc"},O={class:"smtp-info"},b={class:"info-row"},k={class:"info-label"},U={class:"info-value truncate"},Z={class:"info-row"},Q={class:"info-label"},W={class:"info-value"},Y={class:"info-row"},P={class:"info-label"},G={class:"info-value"},R={class:"info-row"},B={class:"info-label"},H={class:"info-value truncate"},F={class:"action-buttons"},J=(0,u.aZ)({__name:"SmtpCard",props:{service:{type:Object,required:!0}},emits:["edit","delete"],setup(e,a){let{emit:t}=a,l=(0,u.Fl)(()=>{switch(e.service.smtp_name){case"Gmail":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMjQgNS40NTd2MTMuOTA5YzAgLjkwNC0uNzMyIDEuNjM2LTEuNjM2IDEuNjM2aC0zLjgxOVYxMS43M0wxMiAxNi42NGwtNi41NDUtNC45MXY5LjI3M0gxLjYzNkExLjYzNiAxLjYzNiAwIDAgMSAwIDE5LjM2NlY1LjQ1N2MwLTIuMDIzIDIuMzA5LTMuMTc4IDMuOTI3LTEuOTY0TDUuNDU1IDQuNjQgMTIgOS41NDhsNi41NDUtNC45MSAxLjUyOC0xLjE0NUMyMS42OSAyLjI4IDI0IDMuNDM0IDI0IDUuNDU3eiIgZmlsbD0iI0QxNDgzNiIvPjwvc3ZnPg==";case"Mailgun":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6IiBmaWxsPSIjRjA0MjNCIi8+PHBhdGggZD0iTTEyIDZjLTMuMzEgMC02IDIuNjktNiA2czIuNjkgNiA2IDYgNi0yLjY5IDYtNi0yLjY5LTYtNi02em0wIDEwYy0yLjIxIDAtNC0xLjc5LTQtNHMxLjc5LTQgNC00IDQgMS43OSA0IDQtMS43OSA0LTQgNHoiIGZpbGw9IiNGMDQyM0IiLz48L3N2Zz4=";case"AWS SES":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTMuMTA2IDEwLjYzM0wyMi44IDEyLjczQTExLjk0NyAxMS45NDcgMCAwIDAgMTIgNC4yYy02LjYyNCAwLTEyIDUuMzc2LTEyIDEyczUuMzc2IDEyIDEyIDEyYzQuOTY4IDAgOS4yNDItMy4wMyAxMS4xMDYtNy4zNDJMMTMuMTA2IDE4Ljc1VjEwLjYzM3oiIGZpbGw9IiNGRjk5MDAiLz48cGF0aCBkPSJNMTQuNCA4LjR2MTAuOEwyNCAxNi44bC05LjYtOC40eiIgZmlsbD0iI0ZGOTkwMCIvPjwvc3ZnPg==";case"SendGrid":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptLTEgMTVoLTJ2LTZoMnY2em00IDBoLTJ2LTZoMnY2em00LTcuNWMwIC44My0uNjcgMS41LTEuNSAxLjVoLTljLS44MyAwLTEuNS0uNjctMS41LTEuNVY4YzAtLjgzLjY3LTEuNSAxLjUtMS41aDljLjgzIDAgMS41LjY3IDEuNSAxLjV2MS41eiIgZmlsbD0iIzFBODJFMiIvPjwvc3ZnPg==";case"custom":default:return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzQ3NjQwNjIwNDUzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjUgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM4MTciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwLjE5NTMxMjUiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNODQxLjE0Mjg1NyA3My4xNDI4NTdhMTA5LjcxNDI4NiAxMDkuNzE0Mjg2IDAgMCAxIDEwOS4yMDIyODYgOTkuMTgxNzE0TDk1MC44NTcxNDMgMTgyLjg1NzE0M3YyOTQuMTA3NDI4YTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEtNzIuNTU3NzE0IDYuNTgyODU4TDg3Ny43MTQyODYgNDc2Ljk2NDU3MVYxOTQuMzQwNTcxTDU2OS4wNTE0MjkgNDU5Ljc3NmMtMzIuMTgyODU3IDE5LjUyOTE0My03MS44MjYyODYgMjEuMjExNDI5LTEwOC45MDk3MTUgMi4xMjExNDNsLTEwLjAyMDU3MS01LjcwNTE0M0wxNDYuMjg1NzE0IDE5NC41NnY1NzMuNDRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMCAyOS45ODg1NzIgMzUuOTg2Mjg2TDE4Mi44NTcxNDMgODA0LjU3MTQyOWgyMjEuODQyMjg2YTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEgNi41ODI4NTcgNzIuNTU3NzE0bC02LjU4Mjg1NyAwLjU4NTE0M0gxODIuODU3MTQzYTEwOS43MTQyODYgMTA5LjcxNDI4NiAwIDAgMS0xMDkuMjAyMjg2LTk5LjE4MTcxNUw3My4xNDI4NTcgNzY4di01ODUuMTQyODU3YTEwOS43MTQyODYgMTA5LjcxNDI4NiAwIDAgMSA5OS4xODE3MTQtMTA5LjIwMjI4NkwxODIuODU3MTQzIDczLjE0Mjg1N2g2NTguMjg1NzE0eiBtLTE5LjY3NTQyOCA3My4xNDI4NTdIMjAyLjI0TDQ5Mi45ODI4NTcgMzk3LjIzODg1N2E0MC43NDA1NzEgNDAuNzQwNTcxIDAgMCAwIDI5LjI1NzE0MyA1LjA0Njg1N2wzLjk0OTcxNC0xLjQ2Mjg1N0w4MjEuNDY3NDI5IDE0Ni4yODU3MTR6IiBmaWxsPSIjNEM1RDdDIiBwLWlkPSIzODE4Ij48L3BhdGg+PHBhdGggZD0iTTg1Ny41MjY4NTcgNjI2LjM5NTQyOWw1LjYzMiAzLjUxMDg1NyAxNDYuNjUxNDI5IDEwOS40MjE3MTRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMSA1LjU1ODg1NyA1My42MTM3MTRsLTUuMjY2Mjg2IDQuODI3NDI5LTE0Mi40ODIyODYgMTA4LjU0NGEzNi41NzE0MjkgMzYuNTcxNDI5IDAgMCAxLTQ5LjIyNTE0Mi01My43Nmw0LjkwMDU3MS00LjM4ODU3MiA1Ni4zMi00My4wMDgtMjU3Ljc1NTQyOSAwLjA3MzE0M2EzNi41NzE0MjkgMzYuNTcxNDI5IDAgMCAxLTYuNTgyODU3LTcyLjU1NzcxNGw2LjU4Mjg1Ny0wLjU4NTE0M0g4NzcuNzE0Mjg2bC01OC4yOTQ4NTctNDMuNTkzMTQzYTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEgMzguMTA3NDI4LTYyLjA5ODI4NXoiIGZpbGw9IiMxNDc2QkIiIHAtaWQ9IjM4MTkiPjwvcGF0aD48L3N2Zz4=";case"local":return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzQ3NjQwNjAxODg1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI3ODIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTgyOC44NDg3ODggMTI5LjUwMzYyNGMxNzIuNTAwODc1IDE2OC45MTc3NzEgMTc1LjA2MDIzNSA0NDUuODQwNTQgNi4xNDI0NjQgNjE4LjM0MTQxNWwtNi4xNDI0NjQgNi4xNDI0NjQtMjQzLjY1MTA4NyAyNDAuMDY3OTgzYy00MC40Mzc4OTEgMzkuOTI2MDE4LTEwNS40NDU2MzkgMzkuOTI2MDE4LTE0NS44ODM1MyAwbC0yNDMuNjUxMDg3LTI0MC4wNjc5ODNDMjMuMTYyMjA5IDU4NS4wNjk3MzMgMjAuNjAyODQ5IDMwOC4xNDY5NjMgMTg5LjUyMDYyIDEzNS42NDYwODhsNi4xNDI0NjQtNi4xNDI0NjRjMTc0LjU0ODM2My0xNzIuNTAwODc1IDQ1OC4xMjU0NjktMTcyLjUwMDg3NSA2MzMuMTg1NzA0IDB6TTUxMiAyMzguMDIwNDk1Yy0xMTQuMTQ3NDYzIDAtMjA2Ljc5NjMwMSA5MS4xMTMyMjItMjA2Ljc5NjMwMSAyMDMuNzI1MDY5czkyLjY0ODgzOCAyMDMuNzI1MDY5IDIwNi43OTYzMDEgMjAzLjcyNTA2OCAyMDYuNzk2MzAxLTkxLjExMzIyMiAyMDYuNzk2MzAxLTIwMy43MjUwNjgtOTIuNjQ4ODM4LTIwMy43MjUwNjktMjA2Ljc5NjMwMS0yMDMuNzI1MDY5eiIgZmlsbD0iIzRFNTRDOCIgcC1pZD0iMjc4MyI+PC9wYXRoPjwvc3ZnPg=="}}),s=()=>{t("edit",e.service)},i=()=>{t("delete",e.service)},n=async a=>{await g({id:e.service.id,active:a}),e.service.active=a};return(a,t)=>{let M=D.Z,d=y.ZP,o=r.ZP;return(0,u.wg)(),(0,u.iD)("div",x,[(0,u._)("div",L,[(0,u._)("div",A,[(0,u._)("div",z,[(0,u._)("img",{src:(0,u.SU)(l),class:"w-full h-full object-contain"},null,8,h)]),(0,u._)("div",S,[(0,u._)("div",C,(0,u.zw)(e.service.smtp_name),1),(0,u.Wm)(v,{value:e.service.smtp_status.status},null,8,["value"])])]),(0,u._)("div",E,[(0,u.Wm)(M,{value:e.service.active,"checked-value":1,"unchecked-value":0,"onUpdate:value":n},null,8,["value"])])]),(0,u._)("div",f,(0,u.zw)(e.service.remark),1),(0,u._)("div",O,[(0,u._)("div",b,[(0,u._)("span",k,(0,u.zw)(a.$t("smtp.card.domain"))+"：",1),(0,u._)("span",U,[(0,u.Wm)(d,null,{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.service.sender_domain),1)]),_:1})])]),(0,u._)("div",Z,[(0,u._)("span",Q,(0,u.zw)(a.$t("smtp.card.server"))+"：",1),(0,u._)("span",W,[(0,u.Wm)(d,null,{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.service.relay_host),1)]),_:1})])]),(0,u._)("div",Y,[(0,u._)("span",P,(0,u.zw)(a.$t("smtp.card.port"))+"：",1),(0,u._)("span",G,(0,u.zw)(e.service.relay_port),1)]),(0,u._)("div",R,[(0,u._)("span",B,(0,u.zw)(a.$t("smtp.card.username"))+"：",1),(0,u._)("span",H,(0,u.zw)(e.service.auth_user),1)])]),(0,u._)("div",F,[(0,u.Wm)(o,{secondary:"",class:"action-btn",onClick:s},{icon:(0,u.w5)(()=>t[0]||(t[0]=[(0,u._)("i",{class:"i-mdi-edit"},null,-1)])),_:1}),(0,u.Wm)(o,{secondary:"",class:"action-btn",onClick:i},{icon:(0,u.w5)(()=>t[1]||(t[1]=[(0,u._)("i",{class:"i-mdi-delete"},null,-1)])),_:1})])])}}}),$=(0,T.default)(J,[["__scopeId","data-v-060b5dbe"]]);var V=t(46244),q=t(29283),X=t(6455),K=t(8490),ee=t(81833),ea=t(37864),et=t(73084),el=t(52495);let es=(0,u.aZ)({__name:"SmtpForm",setup(e){let{t:a}=(0,el.QT)(),t=(0,u.iH)(!1),l=(0,u.Fl)(()=>t.value?a("smtp.form.editTitle"):a("smtp.form.addTitle")),s=(0,u.iH)(0),i=(0,u.AE)("formRef"),d=(0,u.qj)({rtype:"custom",smtp_name:"",sender_domain:null,relay_host:"",relay_port:587,auth_user:"",auth_password:"",remark:"",active:1}),o={smtp_name:{required:!0,message:a("smtp.form.validation.nameRequired"),trigger:["blur","input"]},sender_domain:{required:!0,message:a("smtp.form.validation.domainRequired"),trigger:["change"]},relay_host:{required:!0,message:a("smtp.form.validation.serverRequired"),trigger:["blur","input"]},relay_port:{required:!0,trigger:["blur","input"],validator:(e,t)=>!!t||Error(a("smtp.form.validation.portRequired"))},auth_user:{required:!0,message:a("smtp.form.validation.usernameRequired"),trigger:["blur","input"]},auth_password:{required:!0,message:a("smtp.form.validation.passwordRequired"),trigger:["blur","input"]}},m=(0,u.iH)([]),p=async()=>{let e=await I();if((0,n.kJ)(e)){let t=e.filter(e=>!e.is_bound);m.value=e.map(e=>({label:`${e.domain}${e.is_bound?a("smtp.form.bind"):""}`,value:e.domain,disabled:e.is_bound})),d.sender_domain||(t.length>0?d.sender_domain=t[0].domain:d.sender_domain=null)}},y={gmail:{smtp_name:"Gmail",relay_host:"smtp.gmail.com",relay_port:587,username:"",password:"",remark:"Gmail"},mailgun:{smtp_name:"Mailgun",relay_host:"smtp.mailgun.org",relay_port:587,username:"",password:"",remark:"Mailgun"},aws:{smtp_name:"AWS SES",relay_host:"email-smtp.us-east-1.amazonaws.com",relay_port:587,username:"",password:"",remark:"AWS SES"},sendgrid:{smtp_name:"SendGrid",relay_host:"smtp.sendgrid.net",relay_port:587,username:"apikey",password:"",remark:"SendGrid"},custom:{smtp_name:"Custom SMTP Relay",relay_host:"",relay_port:587,username:"",password:"",remark:"Custom SMTP Relay"}},D=()=>{let e=y[d.rtype];e&&(d.smtp_name=e.smtp_name,d.relay_host=e.relay_host,d.relay_port=e.relay_port,d.auth_user=e.username,d.auth_password=e.password,d.remark=e.remark)},j=()=>{s.value=0,d.smtp_name="",d.sender_domain="",d.relay_host="",d.relay_port=587,d.auth_user="",d.auth_password="",d.remark="",d.active=1},w=async()=>{var e;await (null==(e=i.value)?void 0:e.validate()),await N({sender_domain:d.sender_domain||"",relay_host:d.relay_host,relay_port:d.relay_port,auth_user:d.auth_user,auth_password:d.auth_password})},_=()=>({rtype:d.rtype,smtp_name:d.smtp_name,sender_domain:d.sender_domain||"",relay_host:d.relay_host,relay_port:d.relay_port,auth_user:d.auth_user,auth_password:d.auth_password,remark:d.remark,active:d.active}),[T,v]=(0,M.d)({onChangeState:e=>{if(e){p();let e=v.getState();if(d.rtype=e.type,t.value=e.isEdit,D(),e.row){let{row:a}=e;s.value=a.id,d.rtype=a.rtype,d.smtp_name=a.smtp_name,d.sender_domain=a.sender_domain,d.relay_host=a.relay_host,d.relay_port=(0,n.Dx)(a.relay_port),d.auth_user=a.auth_user,d.auth_password=a.auth_password,d.remark=a.remark,d.active=a.active}}else j()},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let a=_();t.value?await g({...a,id:s.value}):await c(a),v.getState().refresh()}});return(e,a)=>{let s=et.Z,n=ea.ZP,M=ee.Z,c=K.Z,g=X.ZP,N=q.Z,p=V.Z,I=r.ZP;return(0,u.wg)(),(0,u.j4)((0,u.SU)(T),{title:(0,u.SU)(l),width:"500"},{"footer-left":(0,u.w5)(()=>[(0,u.Wm)(I,{type:"primary",ghost:"",onClick:w},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("smtp.form.testConnection")),1)]),_:1})]),default:(0,u.w5)(()=>[(0,u.Wm)(p,{ref_key:"formRef",ref:i,model:(0,u.SU)(d),rules:o,class:"pt-16px"},{default:(0,u.w5)(()=>[(0,u.Wm)(M,{cols:1,"x-gap":24},{default:(0,u.w5)(()=>[(0,u.Wm)(n,{span:1,label:e.$t("smtp.form.remark"),path:"remark"},{default:(0,u.w5)(()=>[(0,u.Wm)(s,{value:(0,u.SU)(d).remark,"onUpdate:value":a[0]||(a[0]=e=>(0,u.SU)(d).remark=e)},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,u.Wm)(g,{label:e.$t("smtp.form.domain"),path:"sender_domain"},{default:(0,u.w5)(()=>[(0,u.Wm)(c,{value:(0,u.SU)(d).sender_domain,"onUpdate:value":a[1]||(a[1]=e=>(0,u.SU)(d).sender_domain=e),disabled:(0,u.SU)(t),options:(0,u.SU)(m)},null,8,["value","disabled","options"])]),_:1},8,["label"]),(0,u.Wm)(M,{cols:8,"x-gap":24},{default:(0,u.w5)(()=>[(0,u.Wm)(n,{span:6,label:e.$t("smtp.form.server"),path:"relay_host"},{default:(0,u.w5)(()=>[(0,u.Wm)(s,{value:(0,u.SU)(d).relay_host,"onUpdate:value":a[2]||(a[2]=e=>(0,u.SU)(d).relay_host=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(n,{span:2,label:e.$t("smtp.form.port"),path:"relay_port"},{default:(0,u.w5)(()=>[(0,u.Wm)(N,{value:(0,u.SU)(d).relay_port,"onUpdate:value":a[3]||(a[3]=e=>(0,u.SU)(d).relay_port=e),class:"flex-1","show-button":!1,min:1},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,u.Wm)(g,{label:e.$t("smtp.form.username"),path:"auth_user"},{default:(0,u.w5)(()=>[(0,u.Wm)(s,{value:(0,u.SU)(d).auth_user,"onUpdate:value":a[4]||(a[4]=e=>(0,u.SU)(d).auth_user=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(g,{label:e.$t("smtp.form.password"),path:"auth_password"},{default:(0,u.w5)(()=>[(0,u.Wm)(s,{value:(0,u.SU)(d).auth_password,"onUpdate:value":a[5]||(a[5]=e=>(0,u.SU)(d).auth_password=e),class:"password-input",type:"password"},null,8,["value"])]),_:1},8,["label"]),(0,u.kq)("",!0)]),_:1},8,["model"])]),_:1},8,["title"])}}});var ei=t(86599);let er={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16px"},eu=(0,T.default)({},[["render",function(e,a){let t=ei.Z;return(0,u.wg)(),(0,u.iD)("div",er,[(0,u.Wm)(t,{height:266,sharp:!1}),(0,u.Wm)(t,{height:266,sharp:!1}),(0,u.Wm)(t,{height:266,sharp:!1}),(0,u.Wm)(t,{height:266,sharp:!1}),(0,u.Wm)(t,{height:266,sharp:!1})])}]]),en={class:"p-24px"},eM={class:"bt-title"},ed={class:"flex gap-12px mb-16px"},eo={class:"mr-4px"},em={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16px"},ec={key:2,class:"flex-center h-400px text-center text-desc"},eg=(0,u.aZ)({__name:"index",setup(e){let{t:a}=(0,el.QT)(),t=(0,u.iH)(!1),d=(0,u.iH)([]),o=[{label:"Gmail",key:"gmail"},{label:"Mailgun",key:"mailgun"},{label:"AWS SES",key:"aws"},{label:"SendGrid",key:"sendgrid"},{label:a("smtp.providers.custom"),key:"custom"}],c=e=>{I.setState({isEdit:!1,type:e,row:null}),I.open()},g=async()=>{try{t.value=!0;let e=await m();(0,n.Kn)(e)&&(d.value=(0,n.kJ)(e.list)?e.list:[])}finally{t.value=!1}},[N,I]=(0,M.d)({component:es,state:{isEdit:!1,type:"custom",refresh:g}}),y=e=>{I.setState({isEdit:!0,row:e}),I.open()},D=e=>{(0,n.iG)({title:a("smtp.delete.title"),content:a("smtp.delete.confirm",{name:e.smtp_name}),onConfirm:async()=>{await p({id:e.id}),g()}})};return g(),(e,a)=>{let n=r.ZP,M=i.Z,m=s.Z,g=l.Z;return(0,u.wg)(),(0,u.iD)("div",en,[(0,u._)("div",eM,(0,u.zw)(e.$t("smtp.title")),1),(0,u._)("div",ed,[(0,u.Wm)(M,{placement:"bottom-start",trigger:"hover",size:"large",options:o,onSelect:c},{default:(0,u.w5)(()=>[(0,u.Wm)(n,{type:"primary"},{default:(0,u.w5)(()=>[(0,u._)("span",eo,(0,u.zw)(e.$t("common.actions.add")),1),a[0]||(a[0]=(0,u._)("i",{class:"i-mdi-chevron-down text-17px"},null,-1))]),_:1,__:[0]})]),_:1}),(0,u.Wm)(m,{href:"https://www.billionmail.com/start/smtp.html",text:e.$t("smtp.description")},null,8,["text"])]),(0,u.SU)(t)?((0,u.wg)(),(0,u.j4)(eu,{key:0})):(0,u.SU)(d).length>0?((0,u.wg)(),(0,u.iD)("div",em,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,u.SU)(d),e=>((0,u.wg)(),(0,u.j4)($,{key:e.id,service:e,onEdit:y,onDelete:D},null,8,["service"]))),128))])):((0,u.wg)(),(0,u.iD)("div",ec,[(0,u.Wm)(g)])),(0,u.Wm)((0,u.SU)(N))])}}})}}]);