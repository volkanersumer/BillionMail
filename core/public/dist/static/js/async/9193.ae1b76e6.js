"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["9193"],{84075:function(e,t,l){l.d(t,{WH:()=>r,hI:()=>o,iE:()=>p,mD:()=>c,sS:()=>s,uz:()=>v,vi:()=>d,yG:()=>g,yL:()=>u});var a=l(76882),n=l(34541);let{t:i}=a.Z.global,o=e=>n.e.get("/contact/group/list",{params:e}),r=()=>n.e.get("/contact/group/all"),u=e=>n.e.get("/contact/group/info",{params:e}),s=e=>n.e.post("/contact/group/create",e,{fetchOptions:{loading:i("contacts.group.loading.createGroup"),successMessage:!0}}),c=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:i("contacts.group.loading.updateGroup"),successMessage:!0}}),p=e=>n.e.post("/contact/group/delete",e,{fetchOptions:{loading:i("contacts.group.loading.deleteGroup"),successMessage:!0}}),d=e=>n.e.post("/contact/group/contact_count",e),g=e=>n.e.post("/contact/group/export",e,{fetchOptions:{loading:i("contacts.group.loading.exportGroup"),successMessage:!0}}),v=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:i("contacts.group.loading.saveSettings"),successMessage:!0}})},80947:function(e,t,l){l.d(t,{N:()=>o});var a=l(22895),n=l(68271),i=l(58786);let o=e=>{let{params:t,fetchFn:l,useParams:o,loading:r=!0,immediate:u=!0,rowKey:s=e=>e.id}=e,c=(0,i.iH)(r),p=(0,i.iH)([]),d=(0,i.iH)(0),g=(0,i.iH)(t),v=(0,i.iH)([]),f=()=>o?o(g.value):g.value,m=(0,a.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(g.value.page=1),c.value=!0;try{let e=f(),t=await l(e);(0,n.Kn)(t)&&(p.value=(0,n.kJ)(t.list)?t.list:[],d.value=(0,n.hj)(t.total)?t.total:0)}finally{v.value=[],c.value=!1}},300),h=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(e)},w=e=>{v.value=e},_=e=>{g.value.page=e},y=e=>{g.value.page_size=e};return(0,i.bv)(()=>{u&&h()}),{tableData:p,tableTotal:d,tableKeys:v,tableParams:g,fetchTable:h,resetTable:()=>h(!0),tableProps:(0,i.Fl)(()=>({rowKey:s,data:p.value,loading:c.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:w})),pageProps:(0,i.Fl)(()=>({page:g.value.page,pageSize:g.value.page_size,itemCount:d.value,onUpdatePage:_,onUpdatePageSize:y}))}}},51169:function(e,t,l){l.d(t,{d:()=>o});var a=l(58786),n=l(49247);let i=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:l,onCancel:o,onConfirm:r}=e,u=(0,a.qj)({});return l?[(0,a.aZ)({setup(n,o){let{attrs:r,slots:s}=o;return(0,a.JJ)(i,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(u,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,a.h)(l,{...n,...r},s)}}),u]:[(0,a.aZ)({setup(t,l){let{attrs:s,slots:c}=l,p=(0,a.f3)(i),d=(0,a.iH)(!1);return u.open=()=>{var t;d.value=!0,null==(t=e.onChangeState)||t.call(e,d.value)},u.close=()=>{d.value=!1},u.setState=t=>{var l;null==p||p.setState(t),null==(l=e.onChangeState)||l.call(e,d.value)},u.getState=()=>(null==p?void 0:p.state)??{},null==p||p.extendApi(u),()=>(0,a.Wm)(n.Z,(0,a.dG)({show:d.value},t,s,{onCancel:o,onConfirm:r,"onUpdate:show":e=>{d.value=e??!1}}),c)}}),u]}},86559:function(e,t,l){l.d(t,{Z:()=>i});var a=l(73084),n=l(58786);let i=(0,n.aZ)({__name:"index",props:(0,n.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,n.Vf)(["search"],["update:value"]),setup(e,t){let{expose:l,emit:i}=t,o=(0,n.iH)(null),r=(0,n.tT)(e,"value"),u=()=>{i("search",r.value)};return l({focus:()=>{var e;null==(e=o.value)||e.focus()}}),(e,t)=>{let l=a.Z;return(0,n.wg)(),(0,n.j4)(l,(0,n.dG)({ref_key:"inputRef",ref:o,value:r.value,"onUpdate:value":t[0]||(t[0]=e=>r.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,n.D2)(u,["enter"])}),(0,n.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:u},t[1]||(t[1]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:u},t[2]||(t[2]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},39244:function(e,t,l){l.d(t,{Z:()=>i});var a=l(93953),n=l(58786);let i=(0,n.aZ)({__name:"index",setup(e){let t=!!(0,n.Rr)().toolsLeft,l=!!(0,n.Rr)().toolsRight,i=!!(0,n.Rr)().pageLeft||!!(0,n.Rr)().pageRight;return(e,o)=>{let r=a.Z;return(0,n.wg)(),(0,n.iD)("div",null,[t||l?((0,n.wg)(),(0,n.j4)(r,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,n.w5)(()=>[(0,n.Wm)(r,{class:"items-center",size:12},{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"toolsLeft")]),_:3}),(0,n.Wm)(r,{class:"items-center",size:12},{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"table"),(0,n.SU)(i)?((0,n.wg)(),(0,n.j4)(r,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,n.w5)(()=>[(0,n._)("div",null,[(0,n.WI)(e.$slots,"pageLeft")]),(0,n.Wm)(r,null,{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"modal")])}}})},46244:function(e,t,l){l.d(t,{Z:()=>i});var a=l(98048),n=l(58786);let i=(0,n.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:l}=t,i=(0,n.iH)(null);return l({validate:()=>{var e;return null==(e=i.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=i.value)?void 0:e.restoreValidation()}}),(e,t)=>{let l=a.Z;return(0,n.wg)(),(0,n.j4)(l,(0,n.dG)(e.$attrs,{ref_key:"formRef",ref:i,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},25170:function(e,t,l){l.d(t,{Z:()=>r});var a=l(75459),n=l(58786),i=l(68271);let o={class:"ml-8px text-14px"},r=(0,n.aZ)({__name:"index",props:(0,n.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,n.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:l}=t,r=(0,n.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),u=(0,n.tT)(e,"page"),s=(0,n.tT)(e,"pageSize"),c=t=>{var a;null==(a=e.onUpdatePage)||a.call(e,t),l("refresh")},p=t=>{var a;u.value=1,null==(a=e.onUpdatePage)||a.call(e,1),d(t),l("refresh")},d=e=>{r.value&&(0,i.qQ)(r.value,String(e))};if(r.value){let e=(0,i.$o)(r.value);e&&(s.value=(0,i.Dx)(e))}return(e,t)=>{let l=a.Z;return(0,n.wg)(),(0,n.j4)(l,(0,n.dG)(e.$attrs,{page:u.value,"onUpdate:page":[t[0]||(t[0]=e=>u.value=e),c],"page-size":s.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>s.value=e),p],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,n.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,n.w5)(e=>{let{itemCount:t}=e;return[(0,n._)("span",o," Total "+(0,n.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},50002:function(e,t,l){l.r(t),l.d(t,{default:()=>I});var a=l(39244),n=l(25170),i=l(75754),o=l(86559),r=l(29875),u=l(58786),s=l(93953),c=l(15496),p=l(68271),d=l(80947),g=l(51169),v=l(34541);let f=e=>v.e.get("/abnormal_recipient/list",{params:e}),m=()=>v.e.get("/abnormal_recipient/check_switch"),h=e=>v.e.post("/abnormal_recipient/delete",e,{fetchOptions:{loading:"Deleting, please wait...",successMessage:!0}}),w=()=>v.e.post("/abnormal_recipient/get_scan_log"),_=e=>v.e.post("/abnormal_recipient/check_group",e,{fetchOptions:{loading:"Scanning, please wait...",successMessage:!0}}),y=()=>v.e.post("/abnormal_recipient/clear_abnormal",{},{fetchOptions:{loading:"Clearing, please wait...",successMessage:!0}}),S=e=>v.e.post("/abnormal_recipient/set_check_switch",e,{fetchOptions:{loading:"Setting, please wait...",successMessage:!0}});var k=l(46244),b=l(16715),x=l(2352),W=l(6455),U=l(8490),Z=l(84075);let C={class:"pt-12px"},z={class:"h-32px flex items-center"},H={class:"h-32px flex items-center"},j={class:"h-32px flex items-center"},L=(0,u.aZ)({__name:"Scan",setup(e){let t=(0,u.AE)("formRef"),l=(0,u.qj)({group_id:null,oper:1}),a={group_id:{trigger:"change",validator:()=>!!l.group_id||Error("Please select group")}},n=(0,u.iH)([]),i=async()=>{let e=await (0,Z.WH)();(0,p.Kn)(e)&&(n.value=e.list.map(e=>({label:e.name,value:e.id})))},[o,r]=(0,g.d)({onChangeState:e=>{e?i():(l.group_id=null,l.oper=1)},onConfirm:async()=>{var e;await (null==(e=t.value)?void 0:e.validate()),await _({group_id:l.group_id||0,oper:l.oper}),setTimeout(()=>{let{showLogs:e}=r.getState();e()},1500)}});return(e,i)=>{let r=U.Z,s=W.ZP,c=x.Z,p=b.Z,d=k.Z;return(0,u.wg)(),(0,u.j4)((0,u.SU)(o),{title:"Scan Invalid Domains",width:"480","confirm-text":"Scan"},{default:(0,u.w5)(()=>[(0,u._)("div",C,[(0,u.Wm)(d,{ref_key:"formRef",ref:t,form:(0,u.SU)(l),rules:a},{default:(0,u.w5)(()=>[(0,u.Wm)(s,{label:"Group",path:"group_id"},{default:(0,u.w5)(()=>[(0,u.Wm)(r,{value:(0,u.SU)(l).group_id,"onUpdate:value":i[0]||(i[0]=e=>(0,u.SU)(l).group_id=e),options:(0,u.SU)(n)},null,8,["value","options"])]),_:1}),(0,u.Wm)(s,{label:"Method"},{default:(0,u.w5)(()=>[(0,u.Wm)(p,{value:(0,u.SU)(l).oper,"onUpdate:value":i[1]||(i[1]=e=>(0,u.SU)(l).oper=e)},{default:(0,u.w5)(()=>[(0,u._)("div",z,[(0,u.Wm)(c,{value:1},{default:(0,u.w5)(()=>i[2]||(i[2]=[(0,u.Uk)("no-operation")])),_:1,__:[2]})]),(0,u._)("div",H,[(0,u.Wm)(c,{value:2},{default:(0,u.w5)(()=>i[3]||(i[3]=[(0,u.Uk)("Added to the exception prevention table")])),_:1,__:[3]})]),(0,u._)("div",j,[(0,u.Wm)(c,{value:3},{default:(0,u.w5)(()=>i[4]||(i[4]=[(0,u.Uk)("The abnormal mailbox is deleted from the group")])),_:1,__:[4]})])]),_:1},8,["value"])]),_:1})]),_:1},8,["form"])])]),_:1})}}});var O=l(60579),T=l(36123),P=l.n(T);l(95219),l(7410);let R=(0,u.aZ)({__name:"index",props:{code:{},language:{default:"log"},showLineNumbers:{type:Boolean,default:!0},copyable:{type:Boolean,default:!0},height:{default:"100%"},highlightedLines:{default:()=>[]},wordWrap:{type:Boolean,default:!0},trimWhitespace:{type:Boolean,default:!0}},setup(e){let t,l=(0,u.iH)(null),a=(0,u.iH)(null),n=(0,u.iH)(null),i=(0,u.iH)(null),o=(0,u.Fl)(()=>{let t=e.code;return e.trimWhitespace&&(t=t.trim()),t}),r=(0,u.Fl)(()=>o.value.split("\n")),s=(0,u.Fl)(()=>{if(!e.wordWrap)return r.value.map((e,t)=>({lineNumber:t+1,isOriginalLine:!0}));let t=[];return r.value.forEach((e,l)=>{let a=c(e);t.push({lineNumber:l+1,isOriginalLine:!0});for(let e=1;e<a;e++)t.push({lineNumber:l+1,isOriginalLine:!1})}),t}),c=t=>{if(!l.value||!e.wordWrap)return 1;let a=l.value.clientWidth-32;if(a<=0)return 1;let n=document.createElement("span");n.style.font=getComputedStyle(l.value).font,n.style.visibility="hidden",n.style.position="absolute",n.style.whiteSpace="nowrap",document.body.appendChild(n),n.textContent=t;let i=n.offsetWidth;return document.body.removeChild(n),Math.max(1,Math.ceil(i/a))},p=e=>{var t;return(null==(t=s.value[e])?void 0:t.lineNumber)||1},d=()=>{n.value&&l.value&&(n.value.scrollTop=l.value.scrollTop)},g=(0,u.iH)(null),v=()=>{if(a.value)try{P().highlightElement(a.value)}catch(e){console.warn("代码高亮失败:",e)}},f=function(){for(var e=arguments.length,l=Array(e),a=0;a<e;a++)l[a]=arguments[a];clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),v(...l)},100)};return(0,u.bv)(()=>{(0,u.Y3)(()=>{v(),l.value&&(g.value=new ResizeObserver(()=>{(0,u.Y3)(()=>{})}),g.value.observe(l.value))})}),(0,u.SK)(()=>{g.value&&g.value.disconnect()}),(0,u.YP)(()=>[o.value,e.language],()=>{(0,u.Y3)(()=>{f()})},{deep:!0}),(e,t)=>((0,u.wg)(),(0,u.iD)("div",{class:(0,u.C_)(["code-container",{"with-line-numbers":e.showLineNumbers,"word-wrap":e.wordWrap}])},[e.showLineNumbers?((0,u.wg)(),(0,u.iD)("div",{key:0,ref_key:"lineNumbersContainer",ref:n,class:"line-numbers-container"},[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,u.SU)(s),(t,l)=>((0,u.wg)(),(0,u.iD)("div",{key:l,class:(0,u.C_)(["line-number",{highlighted:e.highlightedLines.includes(p(l)),"original-line":t.isOriginalLine}])},(0,u.zw)(t.isOriginalLine?t.lineNumber:""),3))),128))],512)):(0,u.kq)("",!0),(0,u._)("div",{ref_key:"codeContent",ref:i,class:"code-content"},[(0,u._)("pre",{ref_key:"codePre",ref:l,class:(0,u.C_)(["code-pre",[`language-${e.language}`,{"word-wrap":e.wordWrap}]]),style:(0,u.j5)({height:e.height}),onScroll:d},[t[0]||(t[0]=(0,u.Uk)("				")),(0,u._)("code",{ref_key:"codeElement",ref:a,class:(0,u.C_)(`language-${e.language}`)},(0,u.zw)((0,u.SU)(o)),3),t[1]||(t[1]=(0,u.Uk)("\n			"))],38)],512)],2))}}),$=(0,l(41748).default)(R,[["__scopeId","data-v-7f99ef78"]]),D={class:"pt-12px mb-8px"},M=(0,u.aZ)({__name:"ScanLogs",setup(e){let t=(0,u.iH)(!1),l=(0,u.iH)("None"),a=null,n=(0,u.iH)(!1),i=(0,u.iH)(0),o=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e&&(t.value=!0);let a=await w();(0,p.HD)(a)?(l.value=a,i.value=0,l.value.includes("Check finished")||l.value.includes("扫描完成")?d():n.value&&s()):r()}finally{e&&(t.value=!1)}},r=()=>{i.value++,i.value>=3?d():n.value&&s()},s=()=>{n.value&&(null!==a&&clearTimeout(a),a=window.setTimeout(()=>{o(!1)},1e3))},d=()=>{null!==a&&(clearTimeout(a),a=null),n.value=!1},[v]=(0,g.d)({onChangeState:e=>{e?o(!0):(l.value="None",d())}});return(e,a)=>{let n=c.ZP,i=O.Z;return(0,u.wg)(),(0,u.j4)((0,u.SU)(v),{title:"Scan Logs",width:"820",footer:!1},{default:(0,u.w5)(()=>[(0,u._)("div",D,[(0,u.Wm)(n,{type:"primary",onClick:a[0]||(a[0]=e=>o(!0))},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("common.actions.refresh")),1)]),_:1})]),(0,u.Wm)(i,{show:(0,u.SU)(t)},{default:(0,u.w5)(()=>[(0,u.Wm)($,{height:"480px",code:(0,u.SU)(l)},null,8,["code"])]),_:1},8,["show"])]),_:1})}}});var N=l(52495);let G={class:"ml-8px"},I=(0,u.aZ)({__name:"index",setup(e){let{t}=(0,N.QT)(),l=(0,u.iH)(!1);(async()=>{let e=await m();(0,p.hj)(e)&&(l.value=1===e)})();let v=async e=>{await S({oper:+!!e})},[w,_]=(0,g.d)({component:L,state:{showLogs:()=>{x.open()}}}),k=()=>{_.open()},[b,x]=(0,g.d)({component:M}),W=()=>{x.open()},U=()=>{(0,p.iG)({title:"Clear",content:"This will clear all data under that type, do you continue?",onConfirm:async()=>{await y(),H()}})},{tableParams:Z,tableProps:C,pageProps:z,fetchTable:H,resetTable:j}=(0,d.N)({params:{page:1,page_size:10,status:1,keyword:""},fetchFn:f}),O=(0,u.iH)([{key:"recipient",title:"Email"},{key:"description",title:"Description"},{key:"state",title:"Status",render:e=>e.state||e.count>=3?"Invalid":"Checking"},{key:"create_time",title:"Add Time",render:e=>(0,p.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:100,render:e=>{let l;return(0,u.Wm)(s.Z,{inline:!0},{default:()=>{var a;return[(0,u.Wm)(c.ZP,{type:"error",text:!0,onClick:()=>{T(e)}},"function"!=typeof(a=l=t("common.actions.delete"))&&("[object Object]"!==Object.prototype.toString.call(a)||(0,u.lA)(a))?{default:()=>[l]}:l)]}})}}]),T=e=>{(0,p.iG)({title:"Delete",content:`Are you sure you want to delete [${e.recipient}]`,onConfirm:async()=>{await h({id:e.id}),H()}})};return(e,t)=>{let s=r.Z,p=o.Z,d=i.Z,g=n.Z,f=a.Z;return(0,u.wg)(),(0,u.iD)("div",null,[(0,u.Wm)(f,null,{toolsLeft:(0,u.w5)(()=>[(0,u.Wm)((0,u.SU)(c.ZP),{type:"primary",onClick:k},{default:(0,u.w5)(()=>t[2]||(t[2]=[(0,u.Uk)("Scan Invalid Domains")])),_:1,__:[2]}),(0,u.Wm)((0,u.SU)(c.ZP),{onClick:W},{default:(0,u.w5)(()=>t[3]||(t[3]=[(0,u.Uk)("Scan Logs")])),_:1,__:[3]}),(0,u.Wm)((0,u.SU)(c.ZP),{onClick:U},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("common.actions.clear")),1)]),_:1}),(0,u._)("div",G,[t[4]||(t[4]=(0,u._)("span",{class:"mr-12px"},"Auto block failed emails",-1)),(0,u.Wm)(s,{value:(0,u.SU)(l),"onUpdate:value":[t[0]||(t[0]=e=>(0,u.dq)(l)?l.value=e:null),v]},null,8,["value"])])]),toolsRight:(0,u.w5)(()=>[(0,u.Wm)(p,{value:(0,u.SU)(Z).keyword,"onUpdate:value":t[1]||(t[1]=e=>(0,u.SU)(Z).keyword=e),width:240,placeholder:"Please enter email",onSearch:(0,u.SU)(j)},null,8,["value","onSearch"])]),table:(0,u.w5)(()=>[(0,u.Wm)(d,(0,u.dG)((0,u.SU)(C),{columns:(0,u.SU)(O)}),null,16,["columns"])]),pageRight:(0,u.w5)(()=>[(0,u.Wm)(g,(0,u.dG)((0,u.SU)(z),{onRefresh:(0,u.SU)(H)}),null,16,["onRefresh"])]),modal:(0,u.w5)(()=>[(0,u.Wm)((0,u.SU)(w)),(0,u.Wm)((0,u.SU)(b))]),_:1})])}}})}}]);